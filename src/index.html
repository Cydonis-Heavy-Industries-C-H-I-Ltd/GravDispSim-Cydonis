<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cydonis Heavy Industries: Gravitational Whirlpool Sim.</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<meta name="apple-mobile-web-app-title" content="Cydonis" />
<link rel="manifest" href="/site.webmanifest" />
<meta name="title" content="Cydonis Heavy Industries (C.H.I) Ltd" />
<meta name="description" content=""Tackling life's toughest problems; with science!" />
<script>
/*
          _       _        _          _                  _                _                    _             _        
        /\ \     /\ \     /\_\       /\ \               /\ \             /\ \     _           /\ \          / /\      
       /  \ \    \ \ \   / / /      /  \ \____         /  \ \           /  \ \   /\_\         \ \ \        / /  \     
      / /\ \ \    \ \ \_/ / /      / /\ \_____\       / /\ \ \         / /\ \ \_/ / /         /\ \_\      / / /\ \__  
     / / /\ \ \    \ \___/ /      / / /\/___  /      / / /\ \ \       / / /\ \___/ /         / /\/_/     / / /\ \___\ 
    / / /  \ \_\    \ \ \_/      / / /   / / /      / / /  \ \_\     / / /  \/____/         / / /        \ \ \ \/___/ 
   / / /    \/_/     \ \ \      / / /   / / /      / / /   / / /    / / /    / / /         / / /          \ \ \       
  / / /               \ \ \    / / /   / / /      / / /   / / /    / / /    / / /         / / /       _    \ \ \      
 / / /________         \ \ \   \ \ \__/ / /      / / /___/ / /    / / /    / / /      ___/ / /__     /_/\__/ / /      
/ / /_________\         \ \_\   \ \___\/ /      / / /____\/ /    / / /    / / /      /\__\/_/___\    \ \/___/ /       
\/____________/          \/_/    \/_____/       \/_________/     \/_/     \/_/       \/_________/     \_____\/        
                                                                                                                      
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@BBB@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.    @@@@@BBBBB@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,.  _@@@@@           "=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                "+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                    '4@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@B@@@@@@@@@@@@@@@@@@@@@@@@                       "B@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@"      9@@@@@@@@B.     'B@@@@@@@ga____.               %@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@         9@@@@@@@.       .@@@@@@@@@@@@@@g__              %@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@         @@@@@@@@.       .@@@@@@@@@@@@@@@@@@@_,            0@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@_    . j@@@@@@@@g_.    _@@@@@@@@@@@@@@@@@@@@@@g_.          '@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@_           @@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@           @@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@a          @@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@'  _.   %@@@@@@@@@@@@@P'""""`@@@@@@@@g.        .@@@@@@@@@@@
[@@@@@@@@@@@@@F      B@@@@@@F .+@@@@_.  B@@@@@@@@@@@|      @@@@@@@@@A.         @@@@@@@@@@
[@@"   \@@@@@         @@@@@@  !@@@@@@;  .@@@T.---- Vg_.   j@'----..B@j         [@@@@@@@@@
[@@.   ,@@@@@         &@@@@B   B@@@@P   .@@@||      @@|   @@|     [|@@,         @@@@@@@@@
[@@@@@@@@@@@@@,      j@@@@@@,          .J@@@||      @@|   @@|     [|@@]         @@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@g_       _@@@@@||      --    --      [|@@@         [@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ggggg@@@@@@@||     ___'   ___     [|@@@         [@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@||      --.   --,     [|@@@         [@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@P"     "%@@@@@||      @@|   @@|     [|@@@         [@@@@@@@@
[@@@@@@@@@@@@@N     "@@@@@@@F   ...    '@@@@||      @@|   @@|     [|@@@         @@@@@@@@@
[@@"   \@@@@@"        @@@@@@  .g@@@@_.  .@@@1.===== P.    "@L.====='@@)         @@@@@@@@@
[@@.    @@@@@         [@@@@B  !@@@@@@!  '@@@@@@@@@@@|      @@@@@@@@@@P         ,@@@@@@@@@
[@@@ggg@@@@@@B       _@@@@@@   0@@@@f   !@@@@@@@@@@@ggggggg@@@@@@@@@@          @@@@@@@@@@
[@@@@@@@@@@@@@@@~~~J@@@@@@@@@_         A@@@@@@@@@@@@@@@@@@@@@@@@@@@@"         j@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@g~~~~~@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@          _@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@N          _@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@W"         .+@@@@@@@@@@@@@
[@@@@@@@@@@@@@W"'  "4@@@@@@@@@@P"   "4@@@@@@@@@@@@@@@@@@@@@@@P"          .g@@@@@@@@@@@@@@
[@@@@@@@@@@@@?        @@@@@@@@'       '@@@@@@@@@@@@@@@@@@@@"            ,@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@         [@@@@@@B.       .@@@@@@@@@@@@@@@@P"            ..g@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@B        @@@@@@@@_       J@@@@@@@@@@@=>'               ,g@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@~___~g@@@@@@@@@@g~___~@@@@@                        _@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                    ._/@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                 __g@@@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@P"""9@@@@@           ..__@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.    @@@@@l__-___gg@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@g___g@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
[@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*/
</script>
<!--
#
DARPA operates on the principle that generating big rewards requires taking big risks. But how does the Agency determine what risks are worth taking?

George H. Heilmeier, a former DARPA director (1975-1977), crafted a set of questions known as the "Heilmeier Catechism" to help Agency officials think through,
and evaluate proposed research programs:

    What are you trying to do? Articulate your objectives using absolutely no jargon.
    How is it done today, and what are the limits of current practice? [*]
    What is new in your approach and why do you think it will be successful? [*]
    Who cares? If you are successful, what difference will it make? [The continued existence of the human race 'homo-sapiens'...]
    What are the risks? [High!]
    How much will it cost? [Everything.]
    How long will it take? [Unknowable?]
    What are the mid-term and final “exams” to check for success? [Survival versus extinction for ~*8+ billion people...]
#
-->
<!-- #high-energy #matter #physics #quantum-mechanics #space-time #research-development #industrial #science #mathematics #philosophy #meta-ethics #environment #humanitarianism #climate-crisis #activism #humankind #human-kind-ness" /> -->
	<style>
        body { margin: 0; overflow: hidden; background-color: #000; color: #fff; font-family: 'Inter', sans-serif; }
        #container { width: 100vw; height: 100vh; display: block; }
        #controls-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: rgba(0,0,0,0.7);
            padding: 15px;
            border-radius: 8px;
            color: white;
            z-index: 100;
            max-width: 300px;
        }
        label { display: block; margin-bottom: 5px; font-size: 0.9em; }
        input[type="range"] { width: 100%; margin-bottom: 10px;}
        .info-text { font-size: 0.8em; color: #ccc; margin-top:10px;}
    </style>
</head>
<body>
    <div id="container"></div>
    <div id="controls-panel" class="rounded-lg shadow-xl">
        <h2 class="text-lg font-semibold mb-2">Controls</h2>
        <div>
            <label for="speedSlider">Whirlpool Speed:</label>
            <input type="range" id="speedSlider" min="0" max="20" value="5" step="0.1" class="w-full">
        </div>
        <div class="info-text">
            <p>- Mouse Wheel: Zoom.</p>
            <p>- Right-Click + Drag: Pan Camera.</p>
            <p>- Left-Click + Drag: Rotate Camera.</p>
        </div>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        let scene, camera, renderer, gridMesh, controls;
        let originalVertices; // To store the initial state of vertices
        let whirlpoolSpeed = 0.5; // Default speed, will be controlled by slider
        let time = 0;

        // Grid parameters
        const gridSize = 200;
        const gridDivisions = 100; // Higher divisions for smoother whirlpool

        function init() {
            // --- Scene Setup ---
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000); // Black background for space

            // --- Camera Setup ---
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 80, 100); // Position camera to look at the grid
            camera.lookAt(0, 0, 0);

            // --- Renderer Setup ---
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('container').appendChild(renderer.domElement);

            // --- Lighting ---
            const ambientLight = new THREE.AmbientLight(0x404040, 2); // Soft white light
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1.5);
            directionalLight.position.set(50, 100, 75);
            scene.add(directionalLight);

            // --- Grid Creation ---
            // We use PlaneGeometry and then manipulate its vertices
            const geometry = new THREE.PlaneGeometry(gridSize, gridSize, gridDivisions, gridDivisions);
            const material = new THREE.MeshStandardMaterial({
                color: 0x00ffff, // Cyan color for the grid lines
                wireframe: true,
                roughness: 0.5,
                metalness: 0.2
            });
            gridMesh = new THREE.Mesh(geometry, material);
            gridMesh.rotation.x = -Math.PI / 2; // Rotate to lay flat on XZ plane
            scene.add(gridMesh);

            // Store original vertex positions
            originalVertices = Float32Array.from(gridMesh.geometry.attributes.position.array);

            // --- Camera Controls (OrbitControls) ---
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true; // Smooth camera movement
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false; // True allows panning in screen space
            controls.minDistance = 10;
            controls.maxDistance = 500;
            controls.maxPolarAngle = Math.PI / 1.5; // Prevent camera from going below the grid too much
            controls.mouseButtons = {
                LEFT: THREE.MOUSE.ROTATE,
                MIDDLE: THREE.MOUSE.DOLLY, // Mouse wheel for zoom
                RIGHT: THREE.MOUSE.PAN
            };
            controls.enableZoom = true;
            controls.enablePan = true;

            // --- UI Controls ---
            const speedSlider = document.getElementById('speedSlider');
            speedSlider.addEventListener('input', (event) => {
                whirlpoolSpeed = parseFloat(event.target.value) / 10; // Scale slider value
            });
            // Set initial speed from slider
            whirlpoolSpeed = parseFloat(speedSlider.value) / 10;


            // --- Event Listeners ---
            window.addEventListener('resize', onWindowResize, false);

            // Start animation
            animate();
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function updateWhirlpool() {
            if (!gridMesh || !originalVertices) return;

            const positions = gridMesh.geometry.attributes.position.array;
            const vertexCount = positions.length / 3;
            time += 0.01; // Increment time for animation

            for (let i = 0; i < vertexCount; i++) {
                const ox = originalVertices[i * 3];     // Original x
                const oy = originalVertices[i * 3 + 1]; // Original y (which is z in world space due to plane rotation)
                const oz = originalVertices[i * 3 + 2]; // Original z (which is y in world space)

                const dx = ox; // Distance from center x (grid is centered at 0,0)
                const dz = oy; // Distance from center z (using original y as z for calculation)

                const distance = Math.sqrt(dx * dx + dz * dz);

                // --- Gravitational Well (Funnel Shape) ---
                // A sharper drop-off near the center, smoother (an)isotropy further out
                const funnelStrength = 80; // Controls depth of the well
                const eyeRadius = 5; // Radius of the "calm" eye.
                let yDisplacement = -funnelStrength / (distance + eyeRadius);
                if (distance < eyeRadius) { // Smooth out the very center
                     yDisplacement = -funnelStrength / (eyeRadius * 2) * (distance / eyeRadius);
                }


                // --- Swirl Effect ---
                const swirlStrength = 0.1 * whirlpoolSpeed; // Controls how much it swirls
                const angleOffset = swirlStrength * time - distance * 0.05; // Swirl angle depends on time and distance

                let newX = dx;
                let newZ = dz;

                if (distance > 0.1) { // Avoid issues at the very center for swirl
                    newX = dx * Math.cos(angleOffset) - dz * Math.sin(angleOffset);
                    newZ = dx * Math.sin(angleOffset) + dz * Math.cos(angleOffset);
                }

                // Apply transformations
                // Original PlaneGeometry has x, y (which becomes z), and z (which becomes y)
                positions[i * 3] = newX;         // x-coordinate
                positions[i * 3 + 1] = newZ;     // y-coordinate (becomes z in world space)
                positions[i * 3 + 2] = yDisplacement; // z-coordinate (becomes y in world space, the depth)
            }

            gridMesh.geometry.attributes.position.needsUpdate = true; // IMPORTANT: Tell Three.js to update the geometry
            gridMesh.geometry.computeVertexNormals(); // Recalculate normals for lighting if not wireframe only
        }

        function animate() {
            requestAnimationFrame(animate);

            updateWhirlpool(); // Update the whirlpool effect
            controls.update(); // Required if enableDamping or autoRotate is set
            renderer.render(scene, camera);
        }

        // --- Initialize ---
        init();
    </script>
</body>
</html>